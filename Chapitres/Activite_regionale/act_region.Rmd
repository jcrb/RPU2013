RPU 2013 Analyse
========================================================
```{r date}
date()
```
source: RPU2013
Ce document exploite le fichier RData préparé à partir de la table *RPU__* de Sagec. Voir le document *RPU_2013_Preparation.Rmd* du dossier Resural.

Librairies nécessaires:
-----------------------
```{r library , message=FALSE}
library("gdata")
library("rgrs")
library("lubridate")
library("rattle")
library("epicalc")
library("zoo")
library("xts")
library("xtable")
library("plotrix")
library("openintro")
```
Activité régionale
-----------------------------
```{r routines}
source("../../mes_fonctions.R")
```
Variables globales:
-------------------
```{r var_globales}
mois_courant<-8
annee_couranre<-2013
path<-"../../"
```

Lecture du fichier des données
---------------------------------------
On lit le fichier de travail créé:
```{r Lecture fichier}

load(paste(path,"rpu2013d0108.Rda",sep=""))
d1<-d0108
rm(d0108)

e<-as.Date(d1$ENTREE)
q<-tapply(e,yday(e),length)
plot(q,type="l")

z<-zoo(q,unique(as.Date(d1$ENTREE)))
plot(z)
plot(xts(z))
lines(rollmean(xts(z), 7),col="red")
```

Retour à domicile
-----------------
Les variation du retour journalier à domicile sont calculés de la manière suivante:
- numérateur = somme quotidienne où MODE_SOTIE == Domicile
- dénominateur = somme quotidienne des ENTREE (correspod à q)
```{r retour_dom}
q2<-tapply(d1[d1$MODE_SORTIE=="Domicile",6],yday(d1[d1$MODE_SORTIE == "Domicile", 6]),length)
head(q2)
q3<-q2/q
summary(q3)
plot(q3,type="l")
```
On refait le calcul de q en tenant compte des non réponses:
```{r sauf_na}
q4<-tapply(d1[!is.na(d1$MODE_SORTIE),6],yday(d1[!is.na(d1$MODE_SORTIE), 6]),length)
head(q4)
q5<-q2/q4
head(q5)
summary(q5)
plot(q3,type="l",main="Taux de retour à domicile\n(non réponses exclues)",ylab="Fréquence",xlab="Jours")
```
Taux de non réponses:
```{r non_rep}
q6<-q4/q
head(q6)
summary(q6)
```

